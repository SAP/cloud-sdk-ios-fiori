#!/bin/bash
# Run this under scripts/findPublicAPI folder

rm -f APIs

# Find All public components from FioriSwiftUICore/_ComponentProtocols
grep -r --no-filename --include=\*.swift 'protocol' ../../Sources/FioriSwiftUICore/_ComponentProtocols | grep -v "///" | awk '{print $2}' | sed 's/[:{]//g' | sed 's/^_//' | sed 's/Component//' | sort > APIs

# remove the names which are typically associated with its parent
grep -Fvwf names_to_remove APIs > cleaned

# add API components not generated by sourcery
cat ComponentsNotFromSourcery >> cleaned

sort cleaned > APIs

rm cleaned
